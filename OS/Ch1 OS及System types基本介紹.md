## computer System Structure
### 電腦的組成
1. 硬體（Hardware）
	- 中央處理器（CPU, Central Processing Unit）：CPU是電腦的核心運算和控制單元，負責執行指令和處理數據。它由控制單元（Control Unit）、算術邏輯單元（ALU, Arithmetic Logic Unit）和寄存器（Registers）組成。
	- 記憶體（Memory）：記憶體用來存儲數據和指令。主要分為兩類：
		- 主記憶體（Primary Memory）：如隨機存取記憶體（RAM, Random Access Memory），用來存儲正在使用的數據和程序。
		- 輔助記憶體（Secondary Memory）：如硬碟、固態硬碟（SSD），用來長期存儲數據和程序。
	- 輸入/輸出裝置（I/O Devices）：包括鍵盤、滑鼠、顯示器、打印機等，用於數據的輸入和輸出。
	- 母板（Motherboard）：所有硬體組件的連接平台，包括CPU插槽、記憶體插槽、I/O介面等。
	- 匯流排（Bus）：數據傳輸的通道，用於不同硬體組件之間的通信。主要有數據匯流排、地址匯流排和控制匯流排。
2. 軟體（Software）
	- 系統軟體（System Software）：管理和控制硬體資源，提供基本功能，使應用軟體能夠運行。主要包括：
		- 操作系統（Operating System, OS）：如Windows、macOS、Linux，負責硬體管理、檔案管理、記憶體管理和進程管理等。
		- 驅動程式（Drivers）：使操作系統能夠與硬體設備進行通信。
	- 應用軟體（Application Software）：專為執行特定任務或提供特定功能而設計的軟體，如辦公軟體、圖像編輯軟體、遊戲等。
3. 韌體（Firmware）
	- 韌體是嵌入在硬體設備中的低層次軟體，用於控制硬體的基本操作。BIOS（基本輸入輸出系統）是最常見的韌體之一，它在啟動時初始化並測試系統硬體。
4. 資料（Data）
	- 資料是電腦系統處理的核心內容，包含用戶輸入的信息、系統生成的數據以及軟體程序中使用的各類數據。資料的存儲和處理是電腦系統的主要功能之一。
### user和computer System Structure之間的關係
1. 用戶 -> 命令解釋器（User -> Command Interpreter）
	- 定義
		命令解釋器：又稱Shell，是一種特殊的應用程序，負責接收用戶輸入的命令並將其轉換為操作系統可以理解和執行的操作。常見的命令解釋器包括Unix/Linux中的Bash、Windows中的Command Prompt和PowerShell。
	- 互動過程
		1. 用戶輸入命令：用戶在命令行界面輸入命令。
		2. 命令解釋器解析命令：命令解釋器將用戶輸入的命令解析為一系列操作。
		3. 執行命令：命令解釋器通過系統調用向操作系統請求相應的服務，如啟動程序、訪問文件系統等。
		4. 返回結果：操作系統執行命令後將結果返回給命令解釋器，命令解釋器再將結果展示給用戶。
2. 用戶程序 -> 系統調用（User Program -> System Call）
	- 定義
		- 用戶程序：由用戶編寫和運行的應用程序。
		- 系統調用：用戶程序向操作系統內核請求服務的接口。這些服務包括文件操作、進程控制、記憶體管理、網絡通信等。
	- 互動過程
		1. 用戶程序發出請求：用戶程序中包含的代碼會發出系統調用，請求操作系統提供特定的服務。例如，讀取文件、創建新進程等。
		2. 系統調用接口：操作系統提供的系統調用接口會接收這些請求，並根據請求的類型執行相應的操作。
		3. 操作系統內核處理請求：內核負責執行實際的操作，如文件讀寫、進程調度、內存分配等。
		4. 返回結果：內核將操作結果通過系統調用接口返回給用戶程序，用戶程序接收到結果後繼續執行。
### Kernel（內核）
#### 介紹
- 資源管理：
	- 處理器管理：負責調度CPU時間，分配給不同的進程和線程。
	- 記憶體管理：管理物理和虛擬記憶體，包括內存分配和釋放。
	- 設備管理：控制和協調各種硬體設備的操作，如磁盤、網卡等。
	- 文件系統管理：提供文件存取和管理功能。
- 系統調用接口：
	為應用程序提供與硬體交互的標準接口，允許應用程序通過系統調用請求內核服務。
- 安全和穩定性：
	- 實現進程隔離和訪問控制，保護系統和用戶數據的安全。
	- 提供錯誤處理機制和系統恢復功能，保證系統穩定運行。
#### Kernel Resident in Memory（常駐內存）
內核常駐於內存的原因在於其需要即時響應系統和應用程序的請求。
1. 高效性：
	內核需要快速響應各種系統調用和中斷請求。如果內核不常駐內存，則每次需要時都必須從輔助存儲裝置（如硬盤）讀取，這會導致大量的延遲，影響系統性能。
2. 穩定性：
	內核管理系統的所有資源和設備，任何延遲或故障都可能導致整個系統崩潰。常駐內存可以確保內核始終可用，降低崩潰風險。
3. 安全性：
	內核常駐內存並且受到保護模式的保護，可以防止用戶進程意外或惡意地修改內核代碼或數據，從而提高系統的安全性。
#### 通常不使用virtual memory（虛擬內存）的原因
1. 性能考量：
	虛擬內存涉及頁面交換（paging），這是一個相對較慢的過程。內核需要快速且即時地響應各種請求，如果內核代碼和數據在虛擬內存中，則可能導致頻繁的頁面錯誤（page fault），從而嚴重影響系統性能。
2. 穩定性和可靠性：
	內核負責系統的核心管理功能，如記憶體管理、進程調度等。這些功能需要穩定且即時的運行。如果內核使用虛擬內存，內核代碼或數據被交換出內存時，可能導致系統運行的不穩定，甚至崩潰。
3. 簡化設計和實現：
	內核使用虛擬內存會複雜化其設計，因為內核必須處理自己的頁面交換和記憶體管理邏輯，這增加了內核的複雜性和潛在的錯誤風險。通過常駐內存，內核設計可以更加簡潔和可靠。
4. 資源競爭：
	如果內核使用虛擬內存，內核和用戶進程將會競爭有限的物理內存資源。這可能導致系統性能下降，特別是在內存不足的情況下。
